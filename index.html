<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Power Chart</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0d10; --surface:#0f1214; --ink:#eaf2f7; --muted:#9fb0bd; --accent:#1db954; --ring:#24323a;
    --tap:56px; --radius:16px; --focus:#75caff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink); background:var(--bg);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  a,button,input,select,textarea{font:inherit; color:inherit}
  a:focus, button:focus, input:focus { outline:2px solid var(--focus); outline-offset:2px; border-radius:10px }
  .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }

  /* Animations */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* App Header */
  header{ position:sticky; top:0; z-index:50; background:rgba(12,14,17,.75); -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px); border-bottom:1px solid rgba(36,50,58,.5); animation: fadeIn .5s ease-out }
  .h{ display:flex; align-items:center; justify-content:space-between; padding:10px 14px; animation: fadeInUp .6s ease-out }
  .brand{ display:flex; align-items:center; gap:10px; font-weight:800 }
  .logo{ width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,#1db954,#00a8ff) }
  .pfp{ width:36px; height:36px; border-radius:999px; display:grid; place-items:center; border:1px solid rgba(255,255,255,.12) }

  /* Main */
  main{ padding:16px 14px calc(96px + env(safe-area-inset-bottom)) }

  /* Minimal hero */
  .title{ font-size:clamp(1.4rem,5.2vw,2rem); line-height:1.15; margin:0 0 6px; animation: fadeInUp .7s ease-out }
  .kicker{ color:var(--muted); margin:0 0 14px; animation: fadeInUp .8s ease-out }

  /* Primary actions (big tap targets) */
  .actions{ display:grid; gap:10px; grid-template-columns:1fr 1fr; animation: fadeInUp .9s ease-out }
  .btn{ display:inline-flex; align-items:center; justify-content:center; height:var(--tap); padding:0 14px; border-radius:14px; border:1px solid var(--ring); background:var(--surface); text-decoration:none; font-weight:700; transition:transform .15s ease, background .3s ease }
  .btn.primary{ background:var(--accent); color:#04130a; border:none }
  .btn.ghost{ background:transparent }
  .btn:active{ transform:translateY(1px) }
  .btn:hover{ background:rgba(255,255,255,0.06) }

  /* Compact status card */
  .card{ background:var(--surface); border:1px solid var(--ring); border-radius:var(--radius); padding:14px; margin-top:14px; display:grid; gap:8px; animation: fadeInUp 1s ease-out }
  .row{ display:flex; align-items:center; justify-content:space-between; gap:8px }
  .muted{ color:var(--muted) }
  .pill{ font-size:.85rem; padding:4px 10px; border:1px solid #2b3a44; border-radius:999px; color:var(--muted) }

  /* Simple feature list */
  .list{ margin-top:14px; display:grid; gap:10px; animation: fadeInUp 1.1s ease-out }
  .item{ display:flex; align-items:center; justify-content:space-between; padding:12px; border-radius:14px; border:1px solid var(--ring); background:var(--surface); transition:background .3s ease, transform .15s ease }
  .item:hover{ background:rgba(255,255,255,0.04); transform:translateY(-2px) }
  .item a{ text-decoration:none; font-weight:600 }

  /* Bottom Tab Bar (3 tabs) */
  nav.app-tabs{ position:fixed; left:0; right:0; bottom:0; z-index:60; background:var(--surface); border-top:1px solid var(--ring); padding:8px 8px calc(8px + env(safe-area-inset-bottom)); animation: fadeInUp 1.2s ease-out }
  .tabs{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px }
  .tab{ height:56px; border-radius:12px; border:1px solid var(--ring); background:#0c1114; display:grid; place-items:center; text-decoration:none; font-weight:600; color:var(--ink); transition:background .3s ease, transform .15s ease }
  .tab[aria-current="page"]{ background:var(--accent); color:#04130a; border:none }
  .tab:hover{ background:rgba(255,255,255,0.06); transform:translateY(-2px) }

  @media (min-width:768px){ main{ max-width:560px; margin:0 auto } }
  @media (prefers-reduced-motion: reduce){ *{ animation:none !important; transition:none !important } }
  /* Animations */
  @keyframes drop{ from{ transform:translateY(-100%);} to{ transform:none;} }
  @keyframes pop{ from{ transform:scale(.98); opacity:.8 } to{ transform:scale(1); opacity:1 } }
  @keyframes pulseRing{ 0%{ box-shadow:0 0 0 0 rgba(29,185,84,.0)} 70%{ box-shadow:0 0 0 8px rgba(29,185,84,.15)} 100%{ box-shadow:0 0 0 0 rgba(29,185,84,.0)} }

  .reveal{ opacity:0; transform:translateY(8px); transition:opacity .5s ease, transform .6s cubic-bezier(.21,1,.21,1); transition-delay:var(--d,0ms) }
  body.ready .reveal, .reveal.in{ opacity:1; transform:none }

  header{ animation:drop .6s ease both .05s }
  .btn{ transition: transform .2s ease, box-shadow .3s ease, background .3s ease, border-color .3s ease }
  .btn.primary{ animation: pop .4s ease both .25s }
  .btn.primary:active{ animation:none }
  .btn:active{ transform:translateY(1px) scale(.99) }

  .item:active{ transform:scale(.997) }

  @media (prefers-reduced-motion: reduce){
    header{ animation:none }
    .reveal{ opacity:1; transform:none; transition:none }
    .btn, .item{ transition:none }
  }
</style>
</head>
<body>
  <a href="#main" class="sr-only">Skip to content</a>

  <header role="banner">
    <div class="h">
      <div class="brand" aria-label="Power Chart">
        <div class="logo" aria-hidden="true"></div>
        <div>Power Chart</div>
      </div>
      <a class="pfp" href="Profiles.html" title="Profiles"><span class="sr-only">Open profiles</span>PC</a>
    </div>
  </header>

  <main id="main">
    <h1 class="title reveal" style="--d:80ms">Track life like an RPG.</h1>
    <p class="kicker reveal" style="--d:140ms">Big buttons. Fast actions. Your data stays on your device.</p>

    <div class="actions" role="navigation" aria-label="Primary">
      <a class="btn primary reveal" style="--d:200ms" href="Quiz.html">Start</a>
      <a class="btn reveal" style="--d:260ms" href="Results.html">My Chart</a>
    </div>

    <section class="card reveal" style="--d:320ms" aria-live="polite">
      <div class="row">
        <div>
          <div class="muted">Active profile</div>
          <div id="username" style="font-weight:800">Player One</div>
        </div>
        <span id="attrCount" class="pill">— attributes</span>
      </div>
      <div class="row">
        <strong>Last saved</strong>
        <span id="lastSaved" class="muted">—</span>
      </div>
    </section>

    <div class="list" role="navigation" aria-label="Shortcuts">
      <div class="item reveal" style="--d:380ms">
        <div>
          <div style="font-weight:700">Update Data</div>
          <div class="muted" style="font-size:.95rem">Add new entries quickly</div>
        </div>
        <a class="btn" style="height:44px; padding:0 12px" href="Data.html">Open</a>
      </div>
      <div class="item reveal" style="--d:420ms">
        <div>
          <div style="font-weight:700">Profiles</div>
          <div class="muted" style="font-size:.95rem">Manage attributes & themes</div>
        </div>
        <a class="btn" style="height:44px; padding:0 12px" href="Profiles.html">Open</a>
      </div>
    </div>
  </main>

  <nav class="app-tabs" role="navigation" aria-label="Tab bar">
    <div class="tabs">
      <a class="tab reveal" style="--d:520ms" aria-current="page" href="index.html">Home</a>
      <a class="tab reveal" style="--d:560ms" href="Results.html">Results</a>
      <a class="tab reveal" style="--d:600ms" href="Data.html">Data</a>
    </div>
  </nav>

<script>
const PC_MIN = (function(){
  const KEY = "powerChart.profiles";
  function load(){ try{ return JSON.parse(localStorage.getItem(KEY) || "{}"); }catch(e){ return {}; } }
  function getActive(){
    const s = load();
    if (!s.activeId || !s.byId || !s.byId[s.activeId]) {
      return { id:null, username:"Player One", pfp:null, enabledAttrs:["Intellect","Religion","Strength","Endurance","Social Life","Mental Health","Career"] };
    }
    return { id:s.activeId, ...s.byId[s.activeId] };
  }
  return { getActive };
})();

(function init(){
  const p = PC_MIN.getActive();
  const nameEl = document.getElementById('username');
  const attrCountEl = document.getElementById('attrCount');
  const pfp = document.querySelector('.pfp');

  nameEl.textContent = p.username || "Player One";
  attrCountEl.textContent = (p.enabledAttrs ? p.enabledAttrs.length : 7) + " attributes";
  if (p.pfp){ pfp.textContent = ''; pfp.appendChild(Object.assign(new Image(),{alt:'pfp',src:p.pfp,style:'width:100%;height:100%;object-fit:cover;border-radius:50%'})); }

  const latest = JSON.parse(localStorage.getItem("powerChart.latest."+ (p.id || "")) || "null") ||
                 JSON.parse(localStorage.getItem("powerChart.latest") || "null");
  if (latest && latest.timestamp){
    const dt = new Date(latest.timestamp);
    const nice = dt.toLocaleString(undefined,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"});
    document.getElementById("lastSaved").textContent = nice;
  } else {
    document.getElementById("lastSaved").textContent = "none yet";
  }
})();

/* Page entrance + scroll-reveal */
document.addEventListener('DOMContentLoaded', function(){
  // Kick off staged entrance
  requestAnimationFrame(function(){ document.body.classList.add('ready'); });

  // Progressive reveal when elements scroll into view
  if ('IntersectionObserver' in window){
    const io = new IntersectionObserver(function(entries){
      entries.forEach(function(entry){ if(entry.isIntersecting){ entry.target.classList.add('in'); io.unobserve(entry.target); } });
    },{ root:null, threshold:.12, rootMargin:'0px 0px -10% 0px' });
    document.querySelectorAll('.reveal').forEach(function(el){ io.observe(el); });
  }
});
</script>
</body>
</html>
